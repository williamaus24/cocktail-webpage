<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Cocktail Quiz Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f9f9f9;
            margin: 0;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            color: #333;
        }

        #quiz {
            max-width: 500px;
            background: white;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            margin-bottom: 2rem;
        }

        img {
            width: 100%;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .question {
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 1rem;
        }

        label {
            background: #f0f0f0;
            border: 1px solid #ccc;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            flex: 1 1 calc(50% - 10px);
            display: flex;
            align-items: center;
        }

        input[type="checkbox"] {
            margin-right: 5px;
        }

        button {
            padding: 0.5rem 1rem;
            margin-right: 10px;
            margin-top: 1rem;
        }

        .result {
            font-weight: bold;
            margin-top: 1rem;
        }

        #history {
            max-width: 500px;
            width: 100%;
            background: #fff;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
        }

        .history-item {
            padding: 0.3rem 0;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>

<body>

    <h1>üç∏ Cocktail Quiz Game</h1>

    <div id="quiz">
        <img id="cocktailImage" src="" alt="Cocktail Image" />
        <div class="question" id="questionText"></div>
        <div class="options" id="optionsContainer"></div>
        <div>
            <button id="checkBtn" onclick="checkAnswer()">Check Answer</button>
            <button id="hintBtn" onclick="showHint()">Hint</button>
            <button id="nextBtn" onclick="nextQuestion()" style="display:none;">Continue</button>
        </div>
        <div class="result" id="resultText"></div>
    </div>

    <div id="history">
        <h3>üìö History</h3>
        <div id="historyList"></div>
    </div>

    <script>
        const cocktails = [
            { name: "Whiskey Sour", ingredients: ["50ml Jim Beam White", "25ml fresh lemon juice", "20ml simple syrup"], image: "https://www.thecocktaildb.com/images/media/drink/hbkfsh1589574990.jpg" },
            { name: "Old Fashioned", ingredients: ["60ml Jim Beam White", "1 sugar cube (or 10ml simple syrup)", "2-3 dashes Angostura bitters", "Splash of water"], image: "https://www.thecocktaildb.com/images/media/drink/vrwquq1478252802.jpg" },
            { name: "Gin and Tonic", ingredients: ["50ml Gordon Gin", "Tonic water", "Lime wedge"], image: "https://www.thecocktaildb.com/images/media/drink/qcgz0t1643821443.jpg" },
            { name: "Tom Collins", ingredients: ["45ml Gordon Gin", "30ml lemon juice", "15ml simple syrup", "Soda water"], image: "https://www.thecocktaildb.com/images/media/drink/7cll921606854636.jpg" },
            { name: "Moscow Mule", ingredients: ["50ml Smirnoff Red", "15ml lime juice", "Ginger beer"], image: "https://www.thecocktaildb.com/images/media/drink/3pylqc1504370988.jpg" },
            { name: "Vodka Martini", ingredients: ["60ml Smirnoff Red", "10ml dry vermouth (optional)"], image: "https://www.thecocktaildb.com/images/media/drink/qyxrqw1439906528.jpg" },
            { name: "Margarita", ingredients: ["50ml Jose Cuervo", "20ml lime juice", "15ml Cointreau", "Salt for rim"], image: "https://www.thecocktaildb.com/images/media/drink/5noda61589575158.jpg" },
            { name: "Tequila Sunrise", ingredients: ["50ml Jose Cuervo", "Orange juice", "15ml Grenadine Monin"], image: "https://www.thecocktaildb.com/images/media/drink/quqyqp1480879103.jpg" }
        ];

        const allIngredients = Array.from(new Set(cocktails.flatMap(c => c.ingredients)));
        let currentIndex = 0;
        let quizOrder = cocktails.sort(() => Math.random() - 0.5);
        const historyList = [];

        function loadQuestion() {
            document.getElementById("resultText").innerText = "";
            document.getElementById("nextBtn").style.display = "none";
            document.getElementById("checkBtn").style.display = "inline-block";
            document.getElementById("hintBtn").style.display = "inline-block";

            const quizData = quizOrder[currentIndex];
            document.getElementById("questionText").innerText = `Which ingredients are used in a "${quizData.name}"?`;
            document.getElementById("cocktailImage").src = quizData.image;

            const optionsContainer = document.getElementById("optionsContainer");
            optionsContainer.innerHTML = "";

            const shuffledOptions = [...new Set([...quizData.ingredients, ...getRandomIngredients(6, quizData.ingredients)])].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach(ingredient => {
                const label = document.createElement("label");
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.value = ingredient;
                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(ingredient));
                optionsContainer.appendChild(label);
            });
        }

        function getRandomIngredients(count, excludeList) {
            return allIngredients
                .filter(i => !excludeList.includes(i))
                .sort(() => 0.5 - Math.random())
                .slice(0, count);
        }

        function checkAnswer() {
            const selected = Array.from(document.querySelectorAll("input[type=checkbox]:checked")).map(cb => cb.value);
            const correct = quizOrder[currentIndex].ingredients;
            const correctSet = new Set(correct);

            const isCorrect = correct.length === selected.length && selected.every(val => correctSet.has(val));
            const cocktailName = quizOrder[currentIndex].name;

            document.getElementById("resultText").innerText = isCorrect
                ? "‚úÖ Correct! Cheers!"
                : `‚ùå Not quite. Correct ingredients:\n${correct.join(", ")}`;

            addToHistory(cocktailName, isCorrect);

            document.getElementById("checkBtn").style.display = "none";
            document.getElementById("hintBtn").style.display = "none";
            document.getElementById("nextBtn").style.display = "inline-block";
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < quizOrder.length) {
                loadQuestion();
            } else {
                document.getElementById("quiz").innerHTML = "<h2>üéâ You finished the quiz! You now know all the cocktails!</h2>";
            }
        }

        function showHint() {
            const correct = quizOrder[currentIndex].ingredients;
            const hintCount = Math.min(2, correct.length);
            const hints = correct.slice(0, hintCount).join(", ");
            alert("üß† Hint: One or more ingredients include: " + hints);
        }

        function addToHistory(name, isCorrect) {
            historyList.push({ name, isCorrect });
            renderHistory();
        }

        function renderHistory() {
            const historyDiv = document.getElementById("historyList");
            historyDiv.innerHTML = "";
            historyList.forEach((item, index) => {
                const div = document.createElement("div");
                div.className = "history-item";
                div.innerText = `${index + 1}. ${item.name} - ${item.isCorrect ? "‚úÖ" : "‚ùå"}`;
                historyDiv.appendChild(div);
            });
        }

        loadQuestion();
    </script>

</body>

</html>